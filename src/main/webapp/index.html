<!DOCTYPE html>
<html lang="en">
<head>
    <title>Leabharlann</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/select2.css"/>
    <link rel="sytlesheet" type="text/css" href="css/jquery-ui.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/pqgrid.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/dynatree/ui.dynatree.css"/>
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/jquery.mustache.js"></script>
    <script type="text/javascript" src="js/select2.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/jquery.dynatree.min.js"></script>
    <script type="text/javascript" src="js/pqgrid.min.js"></script>
    <style>
        #folders{width:300px;height:480px}
        #files{width:620px;height:480px}
    </style>
</head>
<body>
<div class="container">
    <div class="row">
        <form class="span12">
            <input id="workspaces" type="hidden"/>
        </form>
    </div>

    <div class="row">
        <div class="span4">
            <div id="folders"></div>
        </div>
        <div class="span8">
            <div id="files"></div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $('#workspaces').select2({
            placeholder: 'Pick a workspace',
            width: '220px',
            ajax: {
                url: 'api/workspaces',
                dataType: 'json',
                data: function (term, page) {
                    return { }
                },
                results: function (data, page) {
                    return { results: data }
                }
            },
            id: function (workspace) {
                return workspace.name;
            },
            formatSelection: function (workspace) {
                return workspace.name;
            },
            formatResult: function (workspace) {
                return workspace.name;
            }
        });

        $("#folders").dynatree({
            initAjax: {
                url: '/api/workspaces/default/folders/00000000-0000-0000-0000-000000000000/folders'
            },
            onLazyRead: function (node) {
                node.appendAjax({
                    url: '/api/workspaces/default/folders/' + node.data.key + '/folder'
                });
            }
        });

        $("#files").pqGrid({
            width: 620,
            height: 480,
            colModel: [
                { title: 'Name' },
                { title: 'MIME Type' },
                { title: 'Encoding' },
                { title: 'Size', dataType: 'integer' },
                { title: 'Last Modified' }
            ],
            dataModel: {
                data: [
                    [ 'xxx', 'xxxx', 'xxxx', 9999, 'xxxxx'],
                    [ 'xxx', 'xxxx', 'xxxx', 9999, 'xxxxx']
                ]
            }
        });
    });
</script>
</body>
</html>